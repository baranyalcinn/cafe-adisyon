appId: com.caffio.cafeadisyon
productName: Cafe Adisyon
compression: store

directories:
  buildResources: build
  output: dist

# Only include what we need - nothing else
files:
  - out/**/*
  - package.json
  - '!**/*.{ts,tsx}'
  - '!**/*.map'
  - '!src/**/*'
  # Exclude ALL non-Windows platform binaries
  - '!**/node_modules/@libsql/darwin-*/**'
  - '!**/node_modules/@libsql/linux-*/**'
  - '!**/node_modules/@prisma/*darwin*/**'
  - '!**/node_modules/@prisma/*linux*/**'
  - '!**/node_modules/@prisma/*freebsd*/**'

# ASAR configuration
asar: true
asarUnpack:
  - '**/*.node'
  - '**/*.dll'
  - '**/node_modules/@libsql/**/*'
  - '**/node_modules/@prisma/**/*'
  - '**/node_modules/.prisma/**/*'

# Disable all rebuilding
npmRebuild: false
nodeGypRebuild: false
buildDependenciesFromSource: false

# ONLY Windows x64 NSIS - nothing else
win:
  executableName: cafe-adisyon
  icon: build/icon.ico
  target:
    - target: nsis
      arch: x64

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  shortcutName: Cafe Adisyon
  deleteAppDataOnUninstall: true
  artifactName: ${productName}-Setup-${version}.${ext}

appId: com.caffio.cafeadisyon
productName: Cafe Adisyon
compression: store

directories:
  buildResources: build
  output: dist

# Only include bundled output
files:
  - out/**/*
  - package.json
  - '!node_modules/**/*'
  - '!src/**/*'
  - '!**/*.ts'
  - '!**/*.tsx'
  - '!**/*.map'

# Native modules as extraResources - bypasses dependency scanning completely
extraResources:
  - from: node_modules/@libsql
    to: app/node_modules/@libsql
    filter:
      - 'client/**/*'
      - 'core/**/*'
      - 'hrana-client/**/*'
      - 'isomorphic-fetch/**/*'
      - 'isomorphic-ws/**/*'
      - 'win32-x64-msvc/**/*'
      - '!darwin-*/**'
      - '!linux-*/**'
  - from: node_modules/@prisma
    to: app/node_modules/@prisma
    filter:
      - '**/*'
  - from: node_modules/.prisma
    to: app/node_modules/.prisma
    filter:
      - '**/*'

asar: true
asarUnpack:
  - '**/*.node'
  - '**/node_modules/@libsql/**/*'
  - '**/node_modules/.prisma/**/*'
npmRebuild: false
nodeGypRebuild: false
buildDependenciesFromSource: false

win:
  executableName: cafe-adisyon
  icon: build/icon.ico
  target:
    - target: portable
      arch: x64

portable:
  artifactName: ${productName}-Portable-${version}.${ext}
